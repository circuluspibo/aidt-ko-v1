<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>í•œê¸€ì´ì™€ í•¨ê»˜ - ë³´ê¸° ë‹¨ê³„ í•™ìŠµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            font-size: 20px;
            color: #1e293b;
            overflow: hidden;
        }

        .main-container {
            display: grid;
            grid-template-columns: 1fr 3fr;
            height: 100vh;
            gap: 25px;
            padding: 25px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* AI íŠœí„° ì‚¬ì´ë“œë°” */
        .ai-tutor-sidebar {
            background: white;
            border-radius: 25px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
            border: 4px solid #3b82f6;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 320px;
        }

        .tutor-header {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .tutor-avatar {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 35px;
            border: 4px solid #60a5fa;
            animation: gentle-bounce 3s ease-in-out infinite;
        }

        @keyframes gentle-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .tutor-name {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tutor-status {
            font-size: 14px;
            opacity: 0.9;
        }

        .tutor-body {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .tutor-message {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            padding: 18px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #3b82f6;
            font-size: 16px;
            line-height: 1.5;
            min-height: 100px;
            display: flex;
            align-items: center;
        }

        /* í† ê¸€ ì„¹ì…˜ */
        .toggle-section {
            margin-bottom: 15px;
        }

        .toggle-header {
            background: #f1f5f9;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            color: #374151;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .toggle-header:hover {
            background: #e2e8f0;
        }

        .toggle-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: #f8fafc;
            border-radius: 0 0 10px 10px;
            border: 2px solid #e2e8f0;
            border-top: none;
        }

        .toggle-content.active {
            max-height: 300px;
            padding: 15px;
        }

        .toggle-arrow {
            transition: transform 0.3s ease;
        }

        .toggle-arrow.active {
            transform: rotate(180deg);
        }

        /* í•™ìŠµ ë ˆë²¨ ì„ íƒ */
        .level-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .level-btn {
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: white;
            border: 2px solid #d1d5db;
            font-size: 13px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .level-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .level-btn:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }

        /* ë°˜ë³µ ì„¤ì • */
        .setting-group {
            margin-bottom: 12px;
        }

        .setting-label {
            font-size: 13px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 6px;
            display: block;
        }

        .setting-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .repeat-counter {
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            padding: 4px 10px;
            font-size: 14px;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
        }

        .adjust-btn {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 6px;
            background: #3b82f6;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ì§„í–‰ ìƒíƒœ */
        .progress-stats {
            background: white;
            border-radius: 10px;
            padding: 12px;
            border: 2px solid #e2e8f0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
        }

        .stat-label {
            color: #6b7280;
        }

        .stat-value {
            font-weight: bold;
            color: #374151;
        }

        .tutor-controls {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        .tutor-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            background: #3b82f6;
            color: white;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tutor-btn:active {
            transform: scale(0.95);
        }

        /* ë©”ì¸ í•™ìŠµ ì˜ì—­ */
        .main-learning-area {
            background: white;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            border: 3px solid #e2e8f0;
            display: flex;
            flex-direction: column;
        }

        .learning-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 20px;
            color: white;
        }

        .lesson-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .lesson-title {
            font-size: 24px;
            font-weight: bold;
        }

        .lesson-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .progress-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .progress-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6366f1;
            font-weight: bold;
            font-size: 14px;
        }

        .repeat-status {
            background: rgba(255,255,255,0.2);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
        }

        /* í•™ìŠµ ì½˜í…ì¸  */
        .learning-content {
            flex: 1;
            background: #f8fafc;
            border-radius: 20px;
            padding: 30px;
            border: 2px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 500px;
            text-align: center;
            position: relative;
        }

        .stage-indicator {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 30px;
            display: inline-block;
            align-self: center;
        }

        .timer-display {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(59, 130, 246, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .letter-display {
            font-size: 120px;
            font-weight: bold;
            color: #1e293b;
            background: white;
            padding: 40px;
            border-radius: 25px;
            border: 4px solid #3b82f6;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .letter-info {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            gap: 15px;
        }

        .info-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e2e8f0;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .info-title {
            font-size: 16px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 10px;
        }

        .info-content {
            font-size: 18px;
            color: #6b7280;
            margin-bottom: 10px;
        }

        .hint-image {
            width: 60px;
            height: 60px;
            font-size: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f9ff;
            border-radius: 10px;
        }

        .instruction-text {
            font-size: 20px;
            margin-bottom: 20px;
            font-weight: bold;
            color: #374151;
        }

        .letter-choices {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 30px auto;
            max-width: 600px;
        }

        .letter-choice-btn {
            padding: 20px;
            border: none;
            border-radius: 15px;
            background: white;
            border: 3px solid #d1d5db;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .letter-choice-btn:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
            transform: translateY(-2px);
        }

        .letter-choice-btn.correct {
            background: #dcfce7;
            border-color: #22c55e;
            animation: correctPulse 0.8s ease;
        }

        .letter-choice-btn.incorrect {
            background: #fef2f2;
            border-color: #ef4444;
            animation: shake 0.6s ease;
        }

        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); background: #bbf7d0; }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* ì¡°í•© í•™ìŠµìš© */
        .combination-demo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .letter-part {
            font-size: 60px;
            font-weight: bold;
            background: white;
            padding: 15px 25px;
            border-radius: 15px;
            border: 3px solid #3b82f6;
        }

        .plus-sign, .equals-sign {
            font-size: 30px;
            color: #6b7280;
        }

        .result-letter {
            font-size: 80px;
            font-weight: bold;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            padding: 15px 30px;
            border-radius: 20px;
        }

        /* ë‹¨ì–´ í•™ìŠµìš© */
        .word-breakdown {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .syllable {
            font-size: 50px;
            font-weight: bold;
            background: white;
            padding: 15px;
            border-radius: 15px;
            border: 3px solid #3b82f6;
            min-width: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .word-image {
            width: 120px;
            height: 120px;
            background: #f0f9ff;
            border-radius: 20px;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            border: 3px solid #3b82f6;
        }

        .action-controls {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .action-btn {
            flex: 1;
            padding: 18px;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }

        .action-btn.next {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr 2fr;
                gap: 20px;
                padding: 20px;
            }
        }

        @media (max-width: 900px) {
            .main-container {
                grid-template-columns: 1fr;
                grid-template-rows: auto 1fr;
                gap: 15px;
                padding: 15px;
            }
            
            .ai-tutor-sidebar {
                max-height: 400px;
                min-width: auto;
            }
            
            .letter-choices {
                grid-template-columns: repeat(3, 1fr);
                gap: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- AI íŠœí„° ì‚¬ì´ë“œë°” -->
        <div class="ai-tutor-sidebar">
            <div class="tutor-header">
                <div class="tutor-avatar">ğŸ¤–</div>
                <div class="tutor-name">AI í•œê¸€ì´</div>
                <div class="tutor-status">ë³´ê¸° ë‹¨ê³„ í•™ìŠµì¤‘</div>
            </div>
            <div class="tutor-body">
                <div class="tutor-message" id="tutorMessage">
                    ì•ˆë…•í•˜ì„¸ìš”! í•œê¸€ ë³´ê¸° ë‹¨ê³„ í•™ìŠµì„ ì‹œì‘í•´ë³¼ê¹Œìš”? 
                    ê¸€ìë¥¼ ì²œì²œíˆ ë³´ê³  íŠ¹ì§•ì„ ê¸°ì–µí•˜ì„¸ìš”! ğŸ“šâœ¨
                </div>
                
                <!-- í•™ìŠµ ë‹¨ê³„ ì„ íƒ í† ê¸€ -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleSection('level')">
                        ğŸ“š í•™ìŠµ ë‹¨ê³„ ì„ íƒ
                        <span class="toggle-arrow" id="levelArrow">â–¼</span>
                    </div>
                    <div class="toggle-content" id="levelContent">
                        <div class="level-buttons">
                            <button class="level-btn active" onclick="selectLevel('consonant')">1ë‹¨ê³„: ììŒ ë³´ê¸°</button>
                            <button class="level-btn" onclick="selectLevel('vowel')">2ë‹¨ê³„: ëª¨ìŒ ë³´ê¸°</button>
                            <button class="level-btn" onclick="selectLevel('combination')">3ë‹¨ê³„: ê¸€ì ë³´ê¸°</button>
                            <button class="level-btn" onclick="selectLevel('word')">4ë‹¨ê³„: ë‹¨ì–´ ë³´ê¸°</button>
                        </div>
                    </div>
                </div>
                
                <!-- ë°˜ë³µ ì„¤ì • í† ê¸€ -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleSection('repeat')">
                        ğŸ”„ ë°˜ë³µ ì„¤ì •
                        <span class="toggle-arrow" id="repeatArrow">â–¼</span>
                    </div>
                    <div class="toggle-content" id="repeatContent">
                        <div class="setting-group">
                            <label class="setting-label">ë§ì·„ì„ ë•Œ ë°˜ë³µ</label>
                            <div class="setting-controls">
                                <button class="adjust-btn" onclick="adjustRepeat('correct', -1)">-</button>
                                <div class="repeat-counter" id="correctRepeat">3</div>
                                <button class="adjust-btn" onclick="adjustRepeat('correct', 1)">+</button>
                            </div>
                        </div>
                        <div class="setting-group">
                            <label class="setting-label">í‹€ë ¸ì„ ë•Œ ë°˜ë³µ</label>
                            <div class="setting-controls">
                                <button class="adjust-btn" onclick="adjustRepeat('incorrect', -1)">-</button>
                                <div class="repeat-counter" id="incorrectRepeat">5</div>
                                <button class="adjust-btn" onclick="adjustRepeat('incorrect', 1)">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì§„í–‰ ìƒíƒœ í† ê¸€ -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleSection('progress')">
                        ğŸ“Š í•™ìŠµ í†µê³„
                        <span class="toggle-arrow" id="progressArrow">â–¼</span>
                    </div>
                    <div class="toggle-content" id="progressContent">
                        <div class="progress-stats">
                            <div class="stat-item">
                                <span class="stat-label">ì´ ë¬¸ì œ ìˆ˜:</span>
                                <span class="stat-value" id="totalQuestions">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">ì •ë‹µ ìˆ˜:</span>
                                <span class="stat-value" id="correctAnswers">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">ì •ë‹µë¥ :</span>
                                <span class="stat-value" id="accuracyRate">0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í‰ê·  ì‘ë‹µì‹œê°„:</span>
                                <span class="stat-value" id="avgResponseTime">0ì´ˆ</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">í˜„ì¬ í•­ëª©:</span>
                                <span class="stat-value" id="currentProgress">1/10</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="tutor-controls">
                    <button class="tutor-btn" onclick="getTutorHelp()">ğŸ’¡ ë„ì›€ë§</button>
                    <button class="tutor-btn" onclick="resetStats()">ğŸ“Š í†µê³„ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>

        <!-- ë©”ì¸ í•™ìŠµ ì˜ì—­ -->
        <div class="main-learning-area">
            <div class="learning-header">
                <div class="lesson-info">
                    <div class="lesson-title" id="lessonTitle">ììŒ ë³´ê¸° í•™ìŠµ</div>
                    <div class="lesson-subtitle" id="lessonSubtitle">ê¸°ì´ˆ ììŒ 'ã„±' ë³´ê¸° í•™ìŠµí•˜ê¸°</div>
                </div>
                <div class="progress-info">
                    <div class="repeat-status" id="repeatStatus">ë°˜ë³µ: 1/3</div>
                    <div class="progress-circle" id="progressCircle">1/10</div>
                </div>
            </div>

            <div class="learning-content">
                <div class="stage-indicator">ğŸ‘€ ë³´ê¸° ë‹¨ê³„</div>
                <div class="timer-display" id="timerDisplay">0ì´ˆ</div>
                
                <!-- ììŒ í•™ìŠµ ì˜ì—­ -->
                <div id="consonantArea">
                    <div class="letter-display" id="currentLetter">ã„±</div>
                    
                    <div class="letter-info">
                        <div class="info-card">
                            <div class="info-title">ì´ë¦„</div>
                            <div class="info-content" id="letterName">ê¸°ì—­</div>
                        </div>
                        <div class="info-card">
                            <div class="info-title">ì†Œë¦¬</div>
                            <div class="info-content" id="letterSound">[ã„±]</div>
                        </div>
                        <div class="info-card">
                            <div class="info-title">ì˜ˆì‹œ</div>
                            <div class="info-content" id="letterExample">ê³ ì–‘ì´ì˜ 'ã„±'</div>
                            <div class="hint-image" id="hintImage">ğŸ±</div>
                        </div>
                    </div>
                    
                    <p class="instruction-text">
                        "<span id="targetLetter">ã„±</span>"ì„ ì°¾ì•„ë³´ì„¸ìš”!
                    </p>
                    
                    <div class="letter-choices" id="letterChoices">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>

                <!-- ëª¨ìŒ í•™ìŠµ ì˜ì—­ -->
                <div id="vowelArea" style="display: none;">
                    <div class="letter-display" id="currentVowel">ã…</div>
                    
                    <div class="letter-info">
                        <div class="info-card">
                            <div class="info-title">ì´ë¦„</div>
                            <div class="info-content" id="vowelName">ì•„</div>
                        </div>
                        <div class="info-card">
                            <div class="info-title">ì†Œë¦¬</div>
                            <div class="info-content" id="vowelSound">[ì•„]</div>
                        </div>
                        <div class="info-card">
                            <div class="info-title">ì˜ˆì‹œ</div>
                            <div class="info-content" id="vowelExample">ì•„ê¸°ì˜ 'ã…'</div>
                            <div class="hint-image" id="vowelHintImage">ğŸ‘¶</div>
                        </div>
                    </div>
                    
                    <p class="instruction-text">
                        "<span id="targetVowel">ã…</span>"ì„ ì°¾ì•„ë³´ì„¸ìš”!
                    </p>
                    
                    <div class="letter-choices" id="vowelChoices">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>

                <!-- ì¡°í•© í•™ìŠµ ì˜ì—­ -->
                <div id="combinationArea" style="display: none;">
                    <p style="font-size: 24px; margin-bottom: 30px; font-weight: bold; color: #374151;">
                        ììŒê³¼ ëª¨ìŒì„ í•©ì³ì„œ ê¸€ìë¥¼ ë§Œë“¤ì–´ìš”!
                    </p>
                    
                    <div class="combination-demo">
                        <div class="letter-part" id="combConsonant">ã„±</div>
                        <div class="plus-sign">+</div>
                        <div class="letter-part" id="combVowel">ã…</div>
                        <div class="equals-sign">=</div>
                        <div class="result-letter" id="combResult">ê°€</div>
                    </div>
                    
                    <p class="instruction-text">
                        "<span id="targetCombination">ê°€</span>"ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!
                    </p>
                    
                    <div class="letter-choices" id="combinationChoices">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>

                <!-- ë‹¨ì–´ í•™ìŠµ ì˜ì—­ -->
                <div id="wordArea" style="display: none;">
                    <p style="font-size: 24px; margin-bottom: 30px; font-weight: bold; color: #374151;">
                        ì´ì œ ë‹¨ì–´ë¥¼ ë°°ì›Œë´ìš”!
                    </p>
                    
                    <div class="word-breakdown">
                        <div class="syllable" id="syllable1">ê°€</div>
                        <div class="syllable" id="syllable2">ë°©</div>
                    </div>
                    
                    <div class="word-image" id="wordImage">ğŸ’</div>
                    
                    <p class="instruction-text">
                        "<span id="targetWord">ê°€ë°©</span>"ì„ ì°¾ì•„ë³´ì„¸ìš”!
                    </p>
                    
                    <div class="letter-choices" id="wordChoices">
                        <!-- ë™ì  ìƒì„± -->
                    </div>
                </div>
            </div>

            <div class="action-controls">
                <button class="action-btn primary" onclick="markActivity(true)">âœ… ì˜í–ˆì–´ìš”!</button>
                <button class="action-btn secondary" onclick="markActivity(false)">âŒ ë‹¤ì‹œí•´ìš”</button>
                <button class="action-btn next" onclick="nextItem()">â¡ï¸ ë‹¤ìŒ í•™ìŠµ</button>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ìƒíƒœ ê´€ë¦¬
        let currentLevel = 'consonant';
        let currentItemIndex = 0;
        let currentRepeat = 1;
        let startTime = Date.now();
        let questionStartTime = Date.now();
        let timerInterval;
        
        // ë°˜ë³µ ì„¤ì •
        let repeatSettings = {
            correct: 3,
            incorrect: 5
        };
        
        // ë°ì´í„° ë¶„ì„ìš© í†µê³„
        let learningStats = {
            totalQuestions: 0,
            correctAnswers: 0,
            totalResponseTime: 0,
            responses: [], // ê° ì‘ë‹µ ì„¸ë¶€ ì •ë³´
            sessionStartTime: Date.now()
        };
        
        // í•™ìŠµ ë°ì´í„° (ì´ë¯¸ì§€ ì¶”ê°€)
        const learningData = {
            consonant: [
                { letter: 'ã„±', name: 'ê¸°ì—­', sound: '[ã„±]', example: 'ê³ ì–‘ì´ì˜ ã„±', image: 'ğŸ±' },
                { letter: 'ã„´', name: 'ë‹ˆì€', sound: '[ã„´]', example: 'ë‚˜ë¹„ì˜ ã„´', image: 'ğŸ¦‹' },
                { letter: 'ã„·', name: 'ë””ê·¿', sound: '[ã„·]', example: 'ë‹¤ëŒì¥ì˜ ã„·', image: 'ğŸ¿ï¸' },
                { letter: 'ã„¹', name: 'ë¦¬ì„', sound: '[ã„¹]', example: 'ë¼ë©´ì˜ ã„¹', image: 'ğŸœ' },
                { letter: 'ã…', name: 'ë¯¸ìŒ', sound: '[ã…]', example: 'ëª¨ìì˜ ã…', image: 'ğŸ©' },
                { letter: 'ã…‚', name: 'ë¹„ì', sound: '[ã…‚]', example: 'ë°”ë‚˜ë‚˜ì˜ ã…‚', image: 'ğŸŒ' },
                { letter: 'ã……', name: 'ì‹œì˜·', sound: '[ã……]', example: 'ì‚¬ê³¼ì˜ ã……', image: 'ğŸ' },
                { letter: 'ã…‡', name: 'ì´ì‘', sound: '[ã…‡]', example: 'ì•„ê¸°ì˜ ã…‡', image: 'ğŸ‘¶' },
                { letter: 'ã…ˆ', name: 'ì§€ì’', sound: '[ã…ˆ]', example: 'ìë™ì°¨ì˜ ã…ˆ', image: 'ğŸš—' },
                { letter: 'ã…Š', name: 'ì¹˜ì“', sound: '[ã…Š]', example: 'ì¹˜í‚¨ì˜ ã…Š', image: 'ğŸ—' }
            ],
            vowel: [
                { letter: 'ã…', name: 'ì•„', sound: '[ì•„]', example: 'ì•„ê¸°ì˜ ã…', image: 'ğŸ‘¶' },
                { letter: 'ã…‘', name: 'ì•¼', sound: '[ì•¼]', example: 'ì•¼êµ¬ì˜ ã…‘', image: 'âš¾' },
                { letter: 'ã…“', name: 'ì–´', sound: '[ì–´]', example: 'ì–´ë¨¸ë‹ˆì˜ ã…“', image: 'ğŸ‘©' },
                { letter: 'ã…•', name: 'ì—¬', sound: '[ì—¬]', example: 'ì—¬ìš°ì˜ ã…•', image: 'ğŸ¦Š' },
                { letter: 'ã…—', name: 'ì˜¤', sound: '[ì˜¤]', example: 'ì˜¤ë¦¬ì˜ ã…—', image: 'ğŸ¦†' },
                { letter: 'ã…›', name: 'ìš”', sound: '[ìš”]', example: 'ìš”êµ¬ë¥´íŠ¸ì˜ ã…›', image: 'ğŸ¥›' },
                { letter: 'ã…œ', name: 'ìš°', sound: '[ìš°]', example: 'ìš°ìœ ì˜ ã…œ', image: 'ğŸ¥›' },
                { letter: 'ã… ', name: 'ìœ ', sound: '[ìœ ]', example: 'ìœ ë¦¬ì˜ ã… ', image: 'ğŸªŸ' },
                { letter: 'ã…¡', name: 'ìœ¼', sound: '[ìœ¼]', example: 'ìœ¼ìŒì˜ ã…¡', image: 'ğŸ¤”' },
                { letter: 'ã…£', name: 'ì´', sound: '[ì´]', example: 'ì´ë¹¨ì˜ ã…£', image: 'ğŸ¦·' }
            ],
            combination: [
                { consonant: 'ã„±', vowel: 'ã…', result: 'ê°€', meaning: 'ê°€ë°©ì˜ ê°€', image: 'ğŸ’' },
                { consonant: 'ã„´', vowel: 'ã…', result: 'ë‚˜', meaning: 'ë‚˜ë¹„ì˜ ë‚˜', image: 'ğŸ¦‹' },
                { consonant: 'ã„·', vowel: 'ã…', result: 'ë‹¤', meaning: 'ë‹¤ëŒì¥ì˜ ë‹¤', image: 'ğŸ¿ï¸' },
                { consonant: 'ã„¹', vowel: 'ã…', result: 'ë¼', meaning: 'ë¼ë©´ì˜ ë¼', image: 'ğŸœ' },
                { consonant: 'ã…', vowel: 'ã…', result: 'ë§ˆ', meaning: 'ë§ˆìŒì˜ ë§ˆ', image: 'â¤ï¸' },
                { consonant: 'ã…‚', vowel: 'ã…', result: 'ë°”', meaning: 'ë°”ë‚˜ë‚˜ì˜ ë°”', image: 'ğŸŒ' },
                { consonant: 'ã……', vowel: 'ã…', result: 'ì‚¬', meaning: 'ì‚¬ê³¼ì˜ ì‚¬', image: 'ğŸ' },
                { consonant: 'ã…‡', vowel: 'ã…', result: 'ì•„', meaning: 'ì•„ê¸°ì˜ ì•„', image: 'ğŸ‘¶' },
                { consonant: 'ã…ˆ', vowel: 'ã…', result: 'ì', meaning: 'ìë™ì°¨ì˜ ì', image: 'ğŸš—' },
                { consonant: 'ã…Š', vowel: 'ã…', result: 'ì°¨', meaning: 'ì°¨ì˜ ì°¨', image: 'ğŸš—' }
            ],
            word: [
                { word: 'ê°€ë°©', syllables: ['ê°€', 'ë°©'], image: 'ğŸ’', meaning: 'ì±…ì„ ë„£ëŠ” ê²ƒ' },
                { word: 'ë‚˜ë¹„', syllables: ['ë‚˜', 'ë¹„'], image: 'ğŸ¦‹', meaning: 'ì˜ˆìœ ë‚ ê°œê°€ ìˆëŠ” ê³¤ì¶©' },
                { word: 'ë‹¤ë¦¬', syllables: ['ë‹¤', 'ë¦¬'], image: 'ğŸ¦µ', meaning: 'ê±¸ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ëª¸ì˜ ë¶€ë¶„' },
                { word: 'ë¼ë©´', syllables: ['ë¼', 'ë©´'], image: 'ğŸœ', meaning: 'ë§›ìˆëŠ” ë©´ ìš”ë¦¬' },
                { word: 'ë§ˆìŒ', syllables: ['ë§ˆ', 'ìŒ'], image: 'â¤ï¸', meaning: 'ì‚¬ë‘í•˜ëŠ” ê¸°ë¶„' },
                { word: 'ë°”ë‹¤', syllables: ['ë°”', 'ë‹¤'], image: 'ğŸŒŠ', meaning: 'ë„“ê³  í‘¸ë¥¸ ë¬¼' },
                { word: 'ì‚¬ê³¼', syllables: ['ì‚¬', 'ê³¼'], image: 'ğŸ', meaning: 'ë¹¨ê°„ ê³¼ì¼' },
                { word: 'ì•„ê¸°', syllables: ['ì•„', 'ê¸°'], image: 'ğŸ‘¶', meaning: 'ì‘ê³  ê·€ì—¬ìš´ ì‚¬ëŒ' },
                { word: 'ìë™ì°¨', syllables: ['ì', 'ë™', 'ì°¨'], image: 'ğŸš—', meaning: 'íƒ€ê³  ë‹¤ë‹ˆëŠ” ê²ƒ' },
                { word: 'ì±…', syllables: ['ì±…'], image: 'ğŸ“š', meaning: 'ê¸€ì´ ì“°ì—¬ì§„ ê²ƒ' }
            ]
        };
        
        // í† ê¸€ ê¸°ëŠ¥
        function toggleSection(sectionName) {
            const content = document.getElementById(sectionName + 'Content');
            const arrow = document.getElementById(sectionName + 'Arrow');
            
            content.classList.toggle('active');
            arrow.classList.toggle('active');
        }
        
        // ë ˆë²¨ ì„ íƒ
        function selectLevel(level) {
            // ë ˆë²¨ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            currentLevel = level;
            currentItemIndex = 0;
            currentRepeat = 1;
            
            // ëª¨ë“  ì˜ì—­ ìˆ¨ê¸°ê¸°
            document.querySelectorAll('#consonantArea, #vowelArea, #combinationArea, #wordArea').forEach(area => {
                area.style.display = 'none';
            });
            
            // ì„ íƒëœ ë ˆë²¨ ì˜ì—­ í‘œì‹œ
            const areaMap = {
                consonant: 'consonantArea',
                vowel: 'vowelArea', 
                combination: 'combinationArea',
                word: 'wordArea'
            };
            
            document.getElementById(areaMap[level]).style.display = 'block';
            
            updateContent();
            updateLevelMessage();
            startTimer();
        }
        
        // íƒ€ì´ë¨¸ ì‹œì‘
        function startTimer() {
            questionStartTime = Date.now();
            clearInterval(timerInterval);
            timerInterval = setInterval(updateTimer, 100);
        }
        
        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
            const elapsed = Math.floor((Date.now() - questionStartTime) / 1000);
            document.getElementById('timerDisplay').textContent = elapsed + 'ì´ˆ';
        }
        
        // ë°˜ë³µ íšŒìˆ˜ ì¡°ì •
        function adjustRepeat(type, delta) {
            const newValue = repeatSettings[type] + delta;
            if (newValue >= 1 && newValue <= 10) {
                repeatSettings[type] = newValue;
                document.getElementById(type + 'Repeat').textContent = newValue;
                updateTutorMessage('ì„¤ì • ë³€ê²½', 
                    `${type === 'correct' ? 'ë§ì·„ì„ ë•Œ' : 'í‹€ë ¸ì„ ë•Œ'} ë°˜ë³µ íšŸìˆ˜ê°€ ${newValue}íšŒë¡œ ì„¤ì •ë˜ì—ˆì–´ìš”! ğŸ‘`);
            }
        }
        
        // ì½˜í…ì¸  ì—…ë°ì´íŠ¸
        function updateContent() {
            const item = learningData[currentLevel][currentItemIndex];
            
            switch(currentLevel) {
                case 'consonant':
                    updateConsonantContent(item);
                    break;
                case 'vowel':
                    updateVowelContent(item);
                    break;
                case 'combination':
                    updateCombinationContent(item);
                    break;
                case 'word':
                    updateWordContent(item);
                    break;
            }
            
            updateProgressDisplay();
            generateRandomChoices();
        }
        
        // ììŒ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
        function updateConsonantContent(item) {
            document.getElementById('currentLetter').textContent = item.letter;
            document.getElementById('letterName').textContent = item.name;
            document.getElementById('letterSound').textContent = item.sound;
            document.getElementById('letterExample').textContent = item.example;
            document.getElementById('targetLetter').textContent = item.letter;
            document.getElementById('hintImage').textContent = item.image;
        }
        
        // ëª¨ìŒ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
        function updateVowelContent(item) {
            document.getElementById('currentVowel').textContent = item.letter;
            document.getElementById('vowelName').textContent = item.name;
            document.getElementById('vowelSound').textContent = item.sound;
            document.getElementById('vowelExample').textContent = item.example;
            document.getElementById('targetVowel').textContent = item.letter;
            document.getElementById('vowelHintImage').textContent = item.image;
        }
        
        // ì¡°í•© ì½˜í…ì¸  ì—…ë°ì´íŠ¸
        function updateCombinationContent(item) {
            document.getElementById('combConsonant').textContent = item.consonant;
            document.getElementById('combVowel').textContent = item.vowel;
            document.getElementById('combResult').textContent = item.result;
            document.getElementById('targetCombination').textContent = item.result;
        }
        
        // ë‹¨ì–´ ì½˜í…ì¸  ì—…ë°ì´íŠ¸
        function updateWordContent(item) {
            document.getElementById('syllable1').textContent = item.syllables[0];
            document.getElementById('syllable2').textContent = item.syllables[1] || '';
            document.getElementById('wordImage').textContent = item.image;
            document.getElementById('targetWord').textContent = item.word;
            
            // ì„¸ ë²ˆì§¸ ìŒì ˆ ì²˜ë¦¬
            if (item.syllables[2]) {
                // ì„¸ ë²ˆì§¸ ìŒì ˆì´ ìˆìœ¼ë©´ ìƒˆë¡œ ìƒì„±
                let syllable3 = document.getElementById('syllable3');
                if (!syllable3) {
                    syllable3 = document.createElement('div');
                    syllable3.className = 'syllable';
                    syllable3.id = 'syllable3';
                    document.querySelector('.word-breakdown').appendChild(syllable3);
                }
                syllable3.textContent = item.syllables[2];
                syllable3.style.display = 'flex';
            } else {
                // ì„¸ ë²ˆì§¸ ìŒì ˆì´ ì—†ìœ¼ë©´ ìˆ¨ê¸°ê¸°
                const syllable3 = document.getElementById('syllable3');
                if (syllable3) syllable3.style.display = 'none';
            }
            
            // ë‘ ë²ˆì§¸ ìŒì ˆ ì²˜ë¦¬
            if (!item.syllables[1]) {
                document.getElementById('syllable2').style.display = 'none';
            } else {
                document.getElementById('syllable2').style.display = 'flex';
            }
        }
        
        // ì§„í–‰ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateProgressDisplay() {
            const total = learningData[currentLevel].length;
            document.getElementById('currentProgress').textContent = `${currentItemIndex + 1}/${total}`;
            document.getElementById('progressCircle').textContent = `${currentItemIndex + 1}/${total}`;
            document.getElementById('repeatStatus').textContent = `ë°˜ë³µ: ${currentRepeat}/${repeatSettings.correct}`;
        }
        
        // ë ˆë²¨ë³„ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        function updateLevelMessage() {
            const item = learningData[currentLevel][currentItemIndex];
            const messages = {
                consonant: {
                    title: 'ììŒ ë³´ê¸° í•™ìŠµ',
                    subtitle: `ê¸°ì´ˆ ììŒ '${item.letter}' ë³´ê¸° í•™ìŠµí•˜ê¸°`,
                    message: `í•œê¸€ì˜ ê¸°ë³¸ì´ ë˜ëŠ” ììŒì„ ë°°ì›Œë´ìš”! '${item.letter}' ê¸€ìë¥¼ ì²œì²œíˆ ë³´ê³  íŠ¹ì§•ì„ ê¸°ì–µí•˜ì„¸ìš”! ğŸ“š`
                },
                vowel: {
                    title: 'ëª¨ìŒ ë³´ê¸° í•™ìŠµ',
                    subtitle: `ê¸°ì´ˆ ëª¨ìŒ '${item.letter}' ë³´ê¸° í•™ìŠµí•˜ê¸°`,
                    message: `ì´ì œ ëª¨ìŒì„ ë°°ì›Œë³¼ ì‹œê°„ì´ì—ìš”! '${item.letter}' ê¸€ìì˜ ëª¨ì–‘ì„ ì˜ ê´€ì°°í•´ë³´ì„¸ìš”! ğŸµ`
                },
                combination: {
                    title: 'ê¸€ì ë³´ê¸° í•™ìŠµ',
                    subtitle: `'${item.result}' ê¸€ì ë³´ê¸° í•™ìŠµí•˜ê¸°`,
                    message: `ììŒê³¼ ëª¨ìŒì´ ì–´ë–»ê²Œ í•©ì³ì§€ëŠ”ì§€ ë³´ì„¸ìš”! ${item.consonant} + ${item.vowel} = ${item.result} âœ¨`
                },
                word: {
                    title: 'ë‹¨ì–´ ë³´ê¸° í•™ìŠµ',
                    subtitle: `'${item.word}' ë‹¨ì–´ ë³´ê¸° í•™ìŠµí•˜ê¸°`,
                    message: `ì™„ì „í•œ ë‹¨ì–´ë¥¼ ë°°ì›Œë´ìš”! '${item.word}'ì˜ ëª¨ì–‘ê³¼ ì˜ë¯¸ë¥¼ í•¨ê»˜ ê¸°ì–µí•˜ì„¸ìš”! ğŸ†`
                }
            };
            
            const levelInfo = messages[currentLevel];
            document.getElementById('lessonTitle').textContent = levelInfo.title;
            document.getElementById('lessonSubtitle').textContent = levelInfo.subtitle;
            updateTutorMessage(levelInfo.title, levelInfo.message);
        }
        
        // ëœë¤ ì„ íƒì§€ ìƒì„±
        function generateRandomChoices() {
            const currentData = learningData[currentLevel];
            const currentItem = currentData[currentItemIndex];
            
            // ì •ë‹µ ê²°ì •
            let correctAnswer;
            switch(currentLevel) {
                case 'consonant':
                case 'vowel':
                    correctAnswer = currentItem.letter;
                    break;
                case 'combination':
                    correctAnswer = currentItem.result;
                    break;
                case 'word':
                    correctAnswer = currentItem.word;
                    break;
            }
            
            // ì˜¤ë‹µ ì„ íƒì§€ ìƒì„± (4ê°œ)
            let wrongAnswers = [];
            if (currentLevel === 'word') {
                wrongAnswers = learningData.word
                    .filter((_, index) => index !== currentItemIndex)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 4)
                    .map(item => item.word);
            } else if (currentLevel === 'combination') {
                wrongAnswers = learningData.combination
                    .filter((_, index) => index !== currentItemIndex)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 4)
                    .map(item => item.result);
            } else {
                wrongAnswers = currentData
                    .filter((_, index) => index !== currentItemIndex)
                    .sort(() => Math.random() - 0.5)
                    .slice(0, 4)
                    .map(item => item.letter);
            }
            
            // ì „ì²´ ì„ íƒì§€ (ì •ë‹µ + ì˜¤ë‹µ 4ê°œ) ëœë¤ ë°°ì¹˜
            const allChoices = [correctAnswer, ...wrongAnswers].sort(() => Math.random() - 0.5);
            
            // ì„ íƒì§€ ì»¨í…Œì´ë„ˆ ê²°ì •
            const containerMap = {
                consonant: 'letterChoices',
                vowel: 'vowelChoices',
                combination: 'combinationChoices',
                word: 'wordChoices'
            };
            
            const container = document.getElementById(containerMap[currentLevel]);
            container.innerHTML = '';
            
            allChoices.forEach(choice => {
                const choiceBtn = document.createElement('button');
                choiceBtn.className = 'letter-choice-btn';
                choiceBtn.textContent = choice;
                choiceBtn.onclick = () => selectChoice(choice, correctAnswer);
                container.appendChild(choiceBtn);
            });
        }
        
        // ì„ íƒ ì²˜ë¦¬
        function selectChoice(selectedChoice, correctAnswer) {
            const responseTime = Math.floor((Date.now() - questionStartTime) / 1000);
            const isCorrect = selectedChoice === correctAnswer;
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            updateStats(isCorrect, responseTime, selectedChoice, correctAnswer);
            
            const buttons = document.querySelectorAll('.letter-choice-btn');
            
            // ëª¨ë“  ë²„íŠ¼ ë¹„í™œì„±í™”
            buttons.forEach(btn => {
                btn.style.pointerEvents = 'none';
                btn.classList.remove('correct', 'incorrect');
            });
            
            // ì„ íƒëœ ë²„íŠ¼ì— í”¼ë“œë°± ì ìš©
            const selectedButton = Array.from(buttons).find(btn => 
                btn.textContent === selectedChoice
            );
            
            if (selectedButton) {
                selectedButton.classList.add(isCorrect ? 'correct' : 'incorrect');
            }
            
            if (isCorrect) {
                updateTutorMessage('ğŸ‰ ì •ë‹µì´ì—ìš”!', 
                    `"${selectedChoice}"ë¥¼ ì •í™•íˆ ì°¾ì•˜ë„¤ìš”! ${responseTime}ì´ˆ ë§Œì— ë§í˜”ì–´ìš”! ğŸ‘`);
                setTimeout(() => {
                    markActivity(true);
                    resetChoices();
                }, 1500);
            } else {
                updateTutorMessage('ğŸ˜Š ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”!', 
                    `ì¡°ê¸ˆ ë‹¤ë¥¸ ê²ƒ ê°™ì•„ìš”. íŒíŠ¸ë¥¼ ë‹¤ì‹œ ë³´ê³  ì²œì²œíˆ ì°¾ì•„ë³´ì„¸ìš”! ğŸ’¡`);
                setTimeout(() => {
                    resetChoices();
                    generateRandomChoices(); // í‹€ë ¸ì„ ë•Œ ìƒˆë¡œìš´ ì„ íƒì§€ ìƒì„±
                }, 2000);
            }
        }
        
        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats(isCorrect, responseTime, selectedChoice, correctAnswer) {
            learningStats.totalQuestions++;
            learningStats.totalResponseTime += responseTime;
            
            if (isCorrect) {
                learningStats.correctAnswers++;
            }
            
            // ê°œë³„ ì‘ë‹µ ê¸°ë¡
            learningStats.responses.push({
                level: currentLevel,
                itemIndex: currentItemIndex,
                repeat: currentRepeat,
                correct: isCorrect,
                responseTime: responseTime,
                selectedChoice: selectedChoice,
                correctAnswer: correctAnswer,
                timestamp: Date.now()
            });
            
            updateStatsDisplay();
        }
        
        // í†µê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateStatsDisplay() {
            document.getElementById('totalQuestions').textContent = learningStats.totalQuestions;
            document.getElementById('correctAnswers').textContent = learningStats.correctAnswers;
            
            const accuracy = learningStats.totalQuestions > 0 ? 
                Math.round((learningStats.correctAnswers / learningStats.totalQuestions) * 100) : 0;
            document.getElementById('accuracyRate').textContent = accuracy + '%';
            
            const avgTime = learningStats.totalQuestions > 0 ? 
                Math.round(learningStats.totalResponseTime / learningStats.totalQuestions) : 0;
            document.getElementById('avgResponseTime').textContent = avgTime + 'ì´ˆ';
        }
        
        // ì„ íƒì§€ ë¦¬ì…‹
        function resetChoices() {
            const buttons = document.querySelectorAll('.letter-choice-btn');
            buttons.forEach(btn => {
                btn.classList.remove('correct', 'incorrect');
                btn.style.pointerEvents = 'auto';
            });
            startTimer(); // ìƒˆ ë¬¸ì œ ì‹œì‘ì‹œ íƒ€ì´ë¨¸ ë¦¬ì…‹
        }
        
        // í™œë™ í‰ê°€
        function markActivity(isCorrect) {
            if (isCorrect) {
                if (currentRepeat < repeatSettings.correct) {
                    currentRepeat++;
                    updateProgressDisplay();
                    updateTutorMessage('âœ¨ í•œ ë²ˆ ë”!', 
                        `ì˜í–ˆì–´ìš”! ${currentRepeat}/${repeatSettings.correct}ë²ˆ ë°˜ë³µ ì¤‘ì´ì—ìš”. ê³„ì†í•´ë´ìš”! ğŸ’ª`);
                    setTimeout(() => {
                        generateRandomChoices(); // ìƒˆë¡œìš´ ì„ íƒì§€ë¡œ ë°˜ë³µ
                    }, 1000);
                } else {
                    // í˜„ì¬ í•­ëª© ì™„ë£Œ
                    updateTutorMessage('ğŸ† ì™„ë£Œ!', 
                        `ì´ ê¸€ìë¥¼ ì™„ì „íˆ ìµí˜”ì–´ìš”! ë‹¤ìŒ ê¸€ìë¡œ ë„˜ì–´ê°€ë³¼ê¹Œìš”? ğŸ‰`);
                }
            } else {
                // í‹€ë ¸ì„ ë•ŒëŠ” ì„ íƒì§€ê°€ ì´ë¯¸ generateRandomChoices()ë¡œ ìƒˆë¡œ ìƒì„±ë¨
                updateTutorMessage('ğŸ’ª ë‹¤ì‹œ ë„ì „!', 
                    `ê´œì°®ì•„ìš”! ë‹¤ì‹œ í•œë²ˆ ì°¾ì•„ë³´ì„¸ìš”. íŒíŠ¸ë¥¼ ì˜ ë³´ì„¸ìš”! ğŸ”`);
            }
        }
        
        // ë‹¤ìŒ í•­ëª©
        function nextItem() {
            const maxIndex = learningData[currentLevel].length - 1;
            
            if (currentRepeat >= repeatSettings.correct) {
                if (currentItemIndex < maxIndex) {
                    // ë‹¤ìŒ í•­ëª©ìœ¼ë¡œ
                    currentItemIndex++;
                    currentRepeat = 1;
                    updateContent();
                    updateLevelMessage();
                    startTimer();
                } else {
                    // ë ˆë²¨ ì™„ë£Œ
                    showLevelComplete();
                }
            } else {
                updateTutorMessage('ğŸ”„ ë°˜ë³µ ì™„ë£Œ í•„ìš”', 
                    `í˜„ì¬ ê¸€ìë¥¼ ${repeatSettings.correct}ë²ˆ ë°˜ë³µí•´ì•¼ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆì–´ìš”! í˜„ì¬ ${currentRepeat}/${repeatSettings.correct}ë²ˆ ì™„ë£Œí–ˆì–´ìš”. ğŸ’ª`);
            }
        }
        
        // ë ˆë²¨ ì™„ë£Œ í‘œì‹œ
        function showLevelComplete() {
            const levelNames = {
                consonant: 'ììŒ ë³´ê¸°',
                vowel: 'ëª¨ìŒ ë³´ê¸°', 
                combination: 'ê¸€ì ë³´ê¸°',
                word: 'ë‹¨ì–´ ë³´ê¸°'
            };
            
            updateTutorMessage('ğŸ† ë ˆë²¨ ì™„ë£Œ!', 
                `${levelNames[currentLevel]} ë‹¨ê³„ë¥¼ ëª¨ë‘ ì™„ë£Œí–ˆì–´ìš”! ì •ë§ ëŒ€ë‹¨í•´ìš”! ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ë³¼ê¹Œìš”? ğŸ‰`);
            
            // ë‹¤ìŒ ë ˆë²¨ ìë™ í™œì„±í™”
            const levels = ['consonant', 'vowel', 'combination', 'word'];
            const currentLevelIndex = levels.indexOf(currentLevel);
            if (currentLevelIndex < levels.length - 1) {
                setTimeout(() => {
                    const nextLevel = levels[currentLevelIndex + 1];
                    document.querySelectorAll('.level-btn')[currentLevelIndex + 1].click();
                }, 2000);
            }
        }
        
        // AI íŠœí„° ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        function updateTutorMessage(title, message) {
            const tutorMessage = document.getElementById('tutorMessage');
            tutorMessage.innerHTML = `<strong>${title}</strong><br><br>${message}`;
        }
        
        // ë„ì›€ë§
        function getTutorHelp() {
            const helpMessages = {
                consonant: 'ììŒì€ í•œê¸€ì˜ ê¸°ë³¸ì´ ë˜ëŠ” ê¸€ìì˜ˆìš”. ê¸€ìì˜ ëª¨ì–‘ê³¼ íŒíŠ¸ ì´ë¯¸ì§€ë¥¼ ì˜ ë³´ê³  ê¸°ì–µí•´ì£¼ì„¸ìš”!',
                vowel: 'ëª¨ìŒì€ ììŒê³¼ í•¨ê»˜ ì¨ì„œ ì™„ì „í•œ ê¸€ìë¥¼ ë§Œë“¤ì–´ìš”. ëª¨ìŒì˜ ëª¨ì–‘ê³¼ ì†Œë¦¬ë¥¼ ì˜ ìµí˜€ë³´ì„¸ìš”!',
                combination: 'ììŒê³¼ ëª¨ìŒì„ í•©ì¹˜ë©´ ì™„ì „í•œ ê¸€ìê°€ ë¼ìš”. ì–´ë–»ê²Œ í•©ì³ì§€ëŠ”ì§€ ì˜ ê´€ì°°í•˜ì„¸ìš”!',
                word: 'ì—¬ëŸ¬ ê¸€ìê°€ ëª¨ì´ë©´ ë‹¨ì–´ê°€ ë¼ìš”. ë‹¨ì–´ì˜ ì˜ë¯¸ì™€ ì´ë¯¸ì§€ë¥¼ í•¨ê»˜ ê¸°ì–µí•˜ì„¸ìš”!'
            };
            
            updateTutorMessage('ğŸ’¡ ë„ì›€ë§', helpMessages[currentLevel]);
        }
        
        // í†µê³„ ì´ˆê¸°í™”
        function resetStats() {
            learningStats = {
                totalQuestions: 0,
                correctAnswers: 0,
                totalResponseTime: 0,
                responses: [],
                sessionStartTime: Date.now()
            };
            updateStatsDisplay();
            updateTutorMessage('ğŸ“Š í†µê³„ ì´ˆê¸°í™”', 'í•™ìŠµ í†µê³„ê°€ ì´ˆê¸°í™”ë˜ì—ˆì–´ìš”! ìƒˆë¡œìš´ ë§ˆìŒìœ¼ë¡œ ì‹œì‘í•´ë´ìš”! ğŸŒŸ');
        }
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            selectLevel('consonant');
            startTimer();
            
            setTimeout(() => {
                updateTutorMessage('ğŸ‘‹ í™˜ì˜í•´ìš”!', 
                    'í•œê¸€ ë³´ê¸° ë‹¨ê³„ í•™ìŠµì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•´ìš”! ê¸€ìë¥¼ ì²œì²œíˆ ë³´ê³  íŠ¹ì§•ì„ ê¸°ì–µí•˜ë©´ì„œ í•™ìŠµí•´ë´ìš”! ğŸ“šâœ¨');
            }, 1000);
        });
    </script>
</body>
</html>